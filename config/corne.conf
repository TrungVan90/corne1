# ===== DEBOUNCE SETTINGS =====
# Cấu hình khử nhiễu phím
CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=3
CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=3

# Cấu hình encoder
CONFIG_EC11=y
CONFIG_EC11_TRIGGER_GLOBAL_THREAD=y

# ===== BLUETOOTH OPTIMIZATION =====
# Cấu hình công suất phát BLE
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# Tối ưu kết nối BLE (experimental nhưng rất hiệu quả)
CONFIG_ZMK_BLE_EXPERIMENTAL_CONN=y

# Giảm độ trễ kết nối BLE
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12
CONFIG_BT_PERIPHERAL_PREF_LATENCY=30
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# Tăng số lượng buffer cho Bluetooth
CONFIG_BT_BUF_EVT_RX_COUNT=16
CONFIG_BT_BUF_EVT_DISCARDABLE_COUNT=8

# Cải thiện ổn định kết nối BLE
CONFIG_BT_BUF_ACL_RX_SIZE=512
CONFIG_BT_CTLR_DATA_LENGTH_MAX=251

# Khắc phục lỗi báo cáo pin trên Windows
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=n

# Không xóa bond khi khởi động
CONFIG_ZMK_BLE_CLEAR_BONDS_ON_START=n

# ===== DISPLAY CONFIGURATION =====
CONFIG_ZMK_DISPLAY=y
CONFIG_ZMK_DISPLAY_WORK_QUEUE_DEDICATED=y

# ===== MOUSE EMULATION =====
CONFIG_ZMK_POINTING=y
CONFIG_ZMK_MOUSE=y

# ===== POWER MANAGEMENT =====
# Thời gian idle trước khi vào chế độ tiết kiệm pin (5 phút)
CONFIG_ZMK_IDLE_TIMEOUT=300000

# Deep sleep sau 50 phút không hoạt động
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=3000000

# Cấu hình nguồn
CONFIG_ZMK_EXT_POWER=y
CONFIG_ZMK_USB=y

# ===== ZMK STUDIO =====
CONFIG_ZMK_STUDIO=y
CONFIG_ZMK_STUDIO_LOCKING=n
CONFIG_ZMK_STUDIO_LOCK_ON_DISCONNECT=n

# ===== RGB UNDERGLOW =====
CONFIG_ZMK_RGB_UNDERGLOW=y
CONFIG_WS2812_STRIP=y
CONFIG_ZMK_RGB_UNDERGLOW_EFF_START=0
CONFIG_ZMK_RGB_UNDERGLOW_BRT_MAX=30
CONFIG_ZMK_RGB_UNDERGLOW_EXT_POWER=n
CONFIG_ZMK_RGB_UNDERGLOW_AUTO_OFF_IDLE=y

# ===== LOGGING =====
CONFIG_ZMK_USB_LOGGING=n
